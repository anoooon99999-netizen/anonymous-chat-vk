<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Анонимный чат | VK</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary: #8B5CF6; --primary-light: #A78BFA; --primary-dark: #7C3AED;
            --background: #FAF5FF; --surface: #FFFFFF; --text: #1F2937;
            --text-secondary: #6B7280; --border: #E5E7EB; --accent: #EC4899;
            --success: #10B981; --warning: #F59E0B; --error: #EF4444;
            
            /* Переменные для кастомизации чата */
            --message-bg-my: #8B5CF6;
            --message-text-my: #FFFFFF;
            --message-bg-their: #F3F4F6;
            --message-text-their: #1F2937;
            --chat-bg: #FAF5FF;
            --bubble-radius: 18px;
            --font-size: 16px;
        }

        /* Темная тема */
        [data-theme="dark"] {
            --primary: #A78BFA; --primary-light: #7C3AED; --primary-dark: #6D28D9;
            --background: #111827; --surface: #1F2937; --text: #F9FAFB;
            --text-secondary: #9CA3AF; --border: #374151; --accent: #EC4899;
            --success: #10B981; --warning: #F59E0B; --error: #EF4444;
            
            --message-bg-my: #7C3AED;
            --message-text-my: #FFFFFF;
            --message-bg-their: #374151;
            --message-text-their: #F9FAFB;
            --chat-bg: #111827;
        }

        /* Синяя тема */
        [data-theme="blue"] {
            --primary: #3B82F6; --primary-light: #60A5FA; --primary-dark: #2563EB;
            --background: #EFF6FF; --surface: #FFFFFF; --text: #1E3A8A;
            --text-secondary: #6B7280; --border: #BFDBFE; --accent: #EC4899;
            
            --message-bg-my: #3B82F6;
            --message-text-my: #FFFFFF;
            --message-bg-their: #E0F2FE;
            --message-text-their: #0C4A6E;
            --chat-bg: #EFF6FF;
        }

        /* Зеленая тема */
        [data-theme="green"] {
            --primary: #10B981; --primary-light: #34D399; --primary-dark: #059669;
            --background: #ECFDF5; --surface: #FFFFFF; --text: #064E3B;
            --text-secondary: #6B7280; --border: #A7F3D0; --accent: #EC4899;
            
            --message-bg-my: #10B981;
            --message-text-my: #FFFFFF;
            --message-bg-their: #D1FAE5;
            --message-text-their: #065F46;
            --chat-bg: #ECFDF5;
        }

        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
            background: var(--background); 
            color: var(--text); 
            line-height: 1.4;
            transition: all 0.3s ease;
        }

        /* Контейнеры вкладок */
        .tab-container {
            display: none;
            max-width: 400px;
            margin: 0 auto;
            padding: 16px;
            padding-bottom: 80px;
            background: var(--background);
            min-height: 100vh;
        }

        .tab-container.active {
            display: block;
        }

        .header { text-align: center; margin-bottom: 24px; padding-bottom: 16px; }
        .header h1 { font-size: 34px; font-weight: 700; margin-bottom: 4px; background: linear-gradient(135deg, var(--primary), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .header p { font-size: 16px; color: var(--text-secondary); }
        
        .notification-section { background: linear-gradient(135deg, var(--primary-light), var(--accent)); color: white; padding: 20px; border-radius: 20px; margin-bottom: 24px; box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3); }
        .notification-title { font-weight: 600; margin-bottom: 8px; font-size: 17px; }
        .notification-text { font-size: 15px; color: rgba(255,255,255,0.9); margin-bottom: 16px; line-height: 1.4; }
        .notification-button { width: 100%; background: white; color: var(--primary); border: none; padding: 14px; border-radius: 14px; font-size: 17px; font-weight: 600; cursor: pointer; }
        
        /* Вкладки чатов */
        .chat-tabs { display: flex; background: var(--surface); border-radius: 16px; padding: 4px; margin-bottom: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .chat-tab { flex: 1; text-align: center; padding: 12px; border-radius: 12px; cursor: pointer; font-weight: 500; transition: all 0.3s ease; }
        .chat-tab.active { background: var(--primary); color: white; }
        
        .user-cards { display: flex; flex-direction: column; gap: 12px; margin-bottom: 20px; }
        .user-card { background: var(--surface); border-radius: 20px; padding: 20px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border: 1px solid var(--border); }
        .user-card:active { transform: scale(0.98); }
        .user-info { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 14px; }
        .info-row { display: flex; justify-content: space-between; font-size: 16px; }
        .info-label { color: var(--text-secondary); font-weight: 400; }
        .info-value { font-weight: 500; color: var(--text); }
        .theme-tag { background: linear-gradient(135deg, var(--primary), var(--accent)); color: white; padding: 6px 16px; border-radius: 20px; font-size: 14px; font-weight: 500; display: inline-block; }
        .create-chat-card { background: var(--surface); border: 2px dashed var(--primary-light); border-radius: 20px; padding: 24px; cursor: pointer; text-align: center; transition: all 0.3s ease; margin-bottom: 20px; }
        .create-chat-card:active { background: var(--primary-light); border-color: var(--primary); }
        .create-chat-icon { font-size: 32px; margin-bottom: 12px; color: var(--primary); }
        .create-chat-text { font-size: 17px; font-weight: 600; color: var(--primary); }
        
        /* Нижнее меню */
        .bottom-menu { 
            position: fixed; 
            bottom: 0; 
            left: 50%; 
            transform: translateX(-50%); 
            background: rgba(255, 255, 255, 0.95); 
            backdrop-filter: blur(20px); 
            border-top: 1px solid var(--border); 
            display: flex; 
            padding: 12px 0; 
            z-index: 1000; 
            width: 400px; 
            max-width: 400px; 
            border-radius: 20px 20px 0 0; 
            box-shadow: 0 -4px 20px rgba(0,0,0,0.1); 
            transition: all 0.3s ease;
        }
        
        [data-theme="dark"] .bottom-menu {
            background: rgba(31, 41, 55, 0.95);
        }
        
        .menu-item { flex: 1; text-align: center; padding: 8px; cursor: pointer; transition: all 0.2s ease; }
        .menu-item.active { color: var(--primary); }
        .menu-icon { font-size: 22px; margin-bottom: 4px; }
        .menu-text { font-size: 12px; font-weight: 500; }
        
        /* Модальные окна */
        .modal-overlay { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            right: 0; 
            bottom: 0; 
            background: rgba(0,0,0,0.4); 
            z-index: 2000; 
            align-items: center;
            justify-content: center;
        }
        .modal-content { 
            background: var(--surface); 
            border-radius: 20px; 
            padding: 24px; 
            max-height: 85vh; 
            overflow-y: auto; 
            width: calc(100% - 32px); 
            max-width: 362px;
            margin: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
        }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; padding-bottom: 16px; border-bottom: 1px solid var(--border); }
        .modal-title { font-size: 22px; font-weight: 700; letter-spacing: -0.5px; color: var(--text); }
        .close-button { background: none; border: none; font-size: 24px; cursor: pointer; color: var(--primary); padding: 8px; }
        .form-group { margin-bottom: 24px; }
        .form-label { display: block; font-weight: 600; margin-bottom: 12px; font-size: 17px; color: var(--text); }
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .option-button { background: var(--background); border: 2px solid var(--border); border-radius: 14px; padding: 14px; text-align: center; cursor: pointer; font-size: 16px; font-weight: 500; transition: all 0.2s ease; color: var(--text); }
        .option-button.active { background: linear-gradient(135deg, var(--primary), var(--accent)); color: white; border-color: var(--primary); }
        .age-range { display: flex; align-items: center; gap: 12px; }
        .age-input { flex: 1; padding: 14px; border: 2px solid var(--border); border-radius: 14px; font-size: 16px; text-align: center; background: var(--surface); color: var(--text); }
        .age-separator { color: var(--text-secondary); padding: 0 8px; font-weight: 500; }
        .create-button { width: 100%; background: linear-gradient(135deg, var(--primary), var(--accent)); color: white; border: none; padding: 18px; border-radius: 16px; font-size: 17px; font-weight: 600; cursor: pointer; margin-top: 8px; box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4); }
        
        /* Стили для профиля и настроек */
        .profile-section { background: var(--surface); padding: 24px; border-radius: 20px; margin-bottom: 24px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .profile-header { text-align: center; margin-bottom: 24px; }
        .profile-avatar { width: 100px; height: 100px; background: linear-gradient(135deg, var(--primary), var(--accent)); border-radius: 50%; margin: 0 auto 16px; display: flex; align-items: center; justify-content: center; color: white; font-size: 40px; border: 4px solid var(--surface); box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3); }
        .profile-stats { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 24px; }
        .stat-item { text-align: center; padding: 20px; background: var(--background); border-radius: 16px; }
        .stat-value { font-size: 24px; font-weight: 700; background: linear-gradient(135deg, var(--primary), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .stat-label { font-size: 13px; color: var(--text-secondary); margin-top: 4px; font-weight: 500; }
        .settings-list { display: flex; flex-direction: column; gap: 8px; }
        .setting-item { background: var(--surface); padding: 18px; border-radius: 16px; cursor: pointer; transition: all 0.2s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center; }
        .setting-item:active { background: var(--background); }
        .setting-title { font-weight: 600; margin-bottom: 4px; font-size: 17px; color: var(--text); }
        .setting-description { font-size: 15px; color: var(--text-secondary); }
        .setting-info { flex: 1; }
        .setting-arrow { color: var(--text-secondary); font-size: 18px; }
        
        /* Настройки оформления как в Telegram */
        .theme-options { display: flex; flex-direction: column; gap: 12px; }
        .theme-option { display: flex; align-items: center; padding: 16px; background: var(--background); border-radius: 12px; cursor: pointer; transition: all 0.2s ease; }
        .theme-option.active { border: 2px solid var(--primary); }
        .theme-preview { width: 40px; height: 40px; border-radius: 8px; margin-right: 12px; display: flex; align-items: center; justify-content: center; }
        .theme-light { background: linear-gradient(135deg, #8B5CF6, #EC4899); }
        .theme-dark { background: linear-gradient(135deg, #1F2937, #111827); }
        .theme-blue { background: linear-gradient(135deg, #3B82F6, #60A5FA); }
        .theme-green { background: linear-gradient(135deg, #10B981, #34D399); }
        
        /* Настройки чата */
        .chat-settings-options { display: flex; flex-direction: column; gap: 16px; }
        .setting-card { background: var(--surface); padding: 16px; border-radius: 12px; border: 1px solid var(--border); }
        .setting-card-title { font-weight: 600; margin-bottom: 12px; font-size: 16px; color: var(--text); }
        
        /* Ползунки настроек */
        .slider-group { margin-bottom: 20px; }
        .slider-label { display: flex; justify-content: space-between; margin-bottom: 8px; font-weight: 500; }
        .slider-value { color: var(--primary); font-weight: 600; }
        .slider-wrapper { position: relative; height: 20px; margin: 20px 0; }
        .slider { width: 100%; height: 6px; border-radius: 3px; background: var(--border); outline: none; -webkit-appearance: none; }
        .slider::-webkit-slider-thumb { -webkit-appearance: none; width: 20px; height: 20px; border-radius: 50%; background: var(--primary); cursor: pointer; border: 2px solid white; box-shadow: 0 2px 6px rgba(139, 92, 246, 0.4); }
        .slider::-moz-range-thumb { width: 20px; height: 20px; border-radius: 50%; background: var(--primary); cursor: pointer; border: 2px solid white; box-shadow: 0 2px 6px rgba(139, 92, 246, 0.4); }
        
        /* Переключатели */
        .toggle-switch { position: relative; display: inline-block; width: 44px; height: 24px; }
        .toggle-switch input { opacity: 0; width: 0; height: 0; }
        .toggle-slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--border); transition: .4s; border-radius: 24px; }
        .toggle-slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .toggle-slider { background-color: var(--primary); }
        input:checked + .toggle-slider:before { transform: translateX(20px); }
        
        /* Предпросмотр сообщений */
        .message-preview { display: flex; flex-direction: column; gap: 8px; padding: 16px; background: var(--chat-bg); border-radius: 12px; margin-top: 16px; }
        .preview-message { padding: 12px 16px; border-radius: var(--bubble-radius); max-width: 80%; word-wrap: break-word; font-size: var(--font-size); }
        .preview-message.my { background: var(--message-bg-my); color: var(--message-text-my); margin-left: auto; border-bottom-right-radius: 4px; }
        .preview-message.their { background: var(--message-bg-their); color: var(--message-text-their); margin-right: auto; border-bottom-left-radius: 4px; border: 1px solid var(--border); }
        
        /* Стили для чата */
        .chat-header { 
            display: flex; 
            align-items: center; 
            margin-bottom: 20px; 
            padding-bottom: 16px; 
            border-bottom: 1px solid var(--border);
            position: relative;
        }
        .back-button { 
            font-size: 24px; 
            background: none; 
            border: none; 
            margin-right: 12px; 
            cursor: pointer; 
            color: var(--primary);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s ease;
        }
        .back-button:hover {
            background: var(--background);
        }
        .chat-info { flex: 1; }
        .chat-title { font-weight: 600; font-size: 18px; }
        .chat-members { font-size: 14px; color: var(--text-secondary); }
        
        /* Шестеренка настроек чата */
        .chat-settings { 
            position: relative;
            margin-left: 8px;
        }
        .settings-button {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: var(--primary);
            padding: 8px;
            border-radius: 50%;
            transition: background 0.2s ease;
        }
        .settings-button:hover {
            background: var(--background);
        }
        .settings-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 8px;
            min-width: 180px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            z-index: 1000;
        }
        .settings-dropdown.active {
            display: block;
        }
        .settings-item {
            padding: 12px;
            cursor: pointer;
            border-radius: 8px;
            transition: background 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }
        .settings-item:hover {
            background: var(--background);
        }
        
        /* Кнопки действий в чате */
        .chat-actions { 
            display: flex; 
            gap: 8px; 
            margin-left: 8px;
        }
        .action-button { 
            background: var(--background); 
            border: 1px solid var(--border); 
            border-radius: 12px; 
            padding: 8px 12px; 
            font-size: 12px; 
            cursor: pointer; 
            color: var(--text);
            transition: all 0.2s ease;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        /* Кнопки управления чатом */
        .chat-controls {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
        }
        .control-button {
            flex: 1;
            min-width: 120px;
            padding: 10px 16px;
            border: none;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        .control-button.add-friend {
            background: var(--success);
            color: white;
        }
        .control-button.like {
            background: var(--accent);
            color: white;
        }
        .control-button.dislike {
            background: var(--error);
            color: white;
        }
        .control-button:active {
            transform: scale(0.95);
        }
        
        .messages-container { 
            flex: 1; 
            overflow-y: auto; 
            padding: 16px; 
            margin-bottom: 120px; 
            max-height: calc(100vh - 250px);
            background: var(--chat-bg);
        }
        .message { 
            margin-bottom: 12px; 
            padding: 12px 16px; 
            border-radius: var(--bubble-radius); 
            max-width: 80%; 
            word-wrap: break-word; 
            position: relative; 
            transition: transform 0.2s ease, opacity 0.3s ease;
            font-size: var(--font-size);
        }
        .message-my { 
            background: var(--message-bg-my); 
            color: var(--message-text-my); 
            margin-left: auto; 
            border-bottom-right-radius: 4px; 
        }
        .message-their { 
            background: var(--message-bg-their); 
            color: var(--message-text-their); 
            margin-right: auto; 
            border-bottom-left-radius: 4px; 
            border: 1px solid var(--border); 
        }
        .message-time { font-size: 11px; opacity: 0.7; margin-top: 4px; text-align: right; }
        .message-sender { font-size: 12px; font-weight: 600; margin-bottom: 4px; }
        
        /* Контейнер для ввода сообщения */
        .message-input-container {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--surface);
            padding: 12px 16px;
            border: 1px solid var(--border);
            border-radius: 25px;
            display: flex;
            gap: 12px;
            width: 380px;
            max-width: calc(100% - 40px);
            justify-content: space-between;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            z-index: 1001;
        }

        #messageInput {
            flex: 1;
            padding: 12px 16px;
            border: none;
            border-radius: 20px;
            font-size: var(--font-size);
            background: var(--background);
            color: var(--text);
            outline: none;
        }

        .send-button {
            background: var(--primary);
            color: white;
            border: none;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        
        .send-button:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }
        
        /* Экран ожидания */
        .waiting-screen {
            text-align: center;
            padding: 60px 20px;
        }
        
        .waiting-icon {
            font-size: 80px;
            margin-bottom: 24px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .waiting-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text);
        }
        
        .waiting-text {
            font-size: 16px;
            color: var(--text-secondary);
            margin-bottom: 24px;
            line-height: 1.5;
        }
        
        .waiting-stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .waiting-stat {
            text-align: center;
        }
        
        .waiting-stat-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary);
        }
        
        .waiting-stat-label {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .cancel-button {
            background: var(--error);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .cancel-button:hover {
            background: #DC2626;
        }
        
        /* Стили для уведомлений */
        .snackbar { 
            position: fixed; 
            bottom: 100px; 
            left: 50%; 
            transform: translateX(-50%); 
            background: var(--text); 
            color: white; 
            padding: 12px 20px; 
            border-radius: 12px; 
            font-size: 14px; 
            z-index: 3000; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.15); 
        }
        
        /* Адаптивность */
        @media (max-width: 420px) { 
            .bottom-menu { width: 100%; max-width: 100%; border-radius: 0; }
            .message-input-container { width: calc(100% - 40px); }
            .control-button { min-width: 100px; }
            .tab-container { padding-left: 12px; padding-right: 12px; }
        }
        
        @media (max-width: 380px) { 
            .message-input-container { width: calc(100% - 32px); }
            .control-button { min-width: 90px; font-size: 12px; }
        }
    </style>
</head>
<body>
    <!-- Вкладка Чаты -->
    <div class="tab-container active" id="chatsTab">
        <div class="header">
            <h1>Анонимный чат</h1>
            <p>Общайтесь анонимно в реальном времени</p>
        </div>
        
        <div class="notification-section">
            <div class="notification-title">Добро пожаловать!</div>
            <div class="notification-text">Создавайте анонимные чаты и находите новых друзей в реальном времени</div>
            <button class="notification-button" onclick="enableNotifications()">Включить уведомления</button>
        </div>
        
        <!-- Вкладки чатов -->
        <div class="chat-tabs">
            <div class="chat-tab active" onclick="switchChatTab('Общение')">💬 Общение</div>
            <div class="chat-tab" onclick="switchChatTab('Флирт')">😊 Флирт</div>
            <div class="chat-tab" onclick="switchChatTab('Роль')">🎭 Роль</div>
        </div>
        
        <div class="create-chat-card" onclick="openCreateChatModal()">
            <div class="create-chat-icon">+</div>
            <div class="create-chat-text" id="createChatText">Создать чат для Общения</div>
        </div>
        
        <div class="user-cards" id="chatsContainer">
            <!-- Чаты будут добавляться сюда динамически -->
        </div>
    </div>

    <!-- Вкладка Профиль -->
    <div class="tab-container" id="profileTab">
        <div class="header">
            <h1>Профиль</h1>
            <p>Статистика и настройки</p>
        </div>
        
        <div class="profile-section">
            <div class="profile-header">
                <div class="profile-avatar" id="currentAvatar">👤</div>
                <h2 id="profileName">Анонимный пользователь</h2>
                <p>Репутация: <span id="profileReputation">150</span> баллов</p>
            </div>
            
            <div class="profile-stats">
                <div class="stat-item">
                    <div class="stat-value" id="chatsCount">0</div>
                    <div class="stat-label">Создано чатов</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="messagesCount">0</div>
                    <div class="stat-label">Сообщений</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="friendsCount">0</div>
                    <div class="stat-label">Друзей</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="daysCount">1</div>
                    <div class="stat-label">Дней в чате</div>
                </div>
            </div>
        </div>
        
        <div class="settings-list">
            <div class="setting-item" onclick="shareApp()">
                <div class="setting-info">
                    <div class="setting-title">Поделиться приложением</div>
                    <div class="setting-description">Рассказать друзьям о чате</div>
                </div>
                <div class="setting-arrow">›</div>
            </div>
            <div class="setting-item" onclick="openMyChats()">
                <div class="setting-info">
                    <div class="setting-title">Мои чаты</div>
                    <div class="setting-description">Просмотр активных чатов</div>
                </div>
                <div class="setting-arrow">›</div>
            </div>
            <div class="setting-item" onclick="inviteFriends()">
                <div class="setting-info">
                    <div class="setting-title">Пригласить друзей</div>
                    <div class="setting-description">Пригласить друзей из VK</div>
                </div>
                <div class="setting-arrow">›</div>
            </div>
        </div>
    </div>

    <!-- Вкладка Настройки -->
    <div class="tab-container" id="settingsTab">
        <div class="header">
            <h1>Настройки</h1>
            <p>Управление приложением</p>
        </div>
        
        <div class="settings-list">
            <div class="setting-item" onclick="openThemeSettings()">
                <div class="setting-info">
                    <div class="setting-title">Оформление</div>
                    <div class="setting-description">Темы, шрифты, размер текста</div>
                </div>
                <div class="setting-arrow">›</div>
            </div>
            <div class="setting-item" onclick="openChatSettings()">
                <div class="setting-info">
                    <div class="setting-title">Настройки чата</div>
                    <div class="setting-description">Внешний вид сообщений</div>
                </div>
                <div class="setting-arrow">›</div>
            </div>
            <div class="setting-item" onclick="openNotificationsSettings()">
                <div class="setting-info">
                    <div class="setting-title">Уведомления</div>
                    <div class="setting-description">Настройка push-уведомлений</div>
                </div>
                <div class="setting-arrow">›</div>
            </div>
            <div class="setting-item" onclick="openPrivacySettings()">
                <div class="setting-info">
                    <div class="setting-title">Конфиденциальность</div>
                    <div class="setting-description">Настройки приватности</div>
                </div>
                <div class="setting-arrow">›</div>
            </div>
            <div class="setting-item" onclick="addToFavorites()">
                <div class="setting-info">
                    <div class="setting-title">В избранное</div>
                    <div class="setting-description">Добавить приложение в избранное</div>
                </div>
                <div class="setting-arrow">›</div>
            </div>
            <div class="setting-item" onclick="openAppInfo()">
                <div class="setting-info">
                    <div class="setting-title">О приложении</div>
                    <div class="setting-description">Версия и информация</div>
                </div>
                <div class="setting-arrow">›</div>
            </div>
            <div class="setting-item" onclick="support()">
                <div class="setting-info">
                    <div class="setting-title">Поддержка</div>
                    <div class="setting-description">Связь с разработчиками</div>
                </div>
                <div class="setting-arrow">›</div>
            </div>
        </div>
    </div>

    <!-- Вкладка Ожидание собеседника -->
    <div class="tab-container" id="waitingTab">
        <div class="waiting-screen">
            <div class="waiting-icon">⏳</div>
            <div class="waiting-title">Ищем собеседника</div>
            <div class="waiting-text">
                Мы подбираем для вас подходящего собеседника<br>
                по вашим критериям. Обычно это занимает 1-2 минуты.
            </div>
            
            <div class="waiting-stats">
                <div class="waiting-stat">
                    <div class="waiting-stat-value" id="waitingTime">0:30</div>
                    <div class="waiting-stat-label">Время ожидания</div>
                </div>
                <div class="waiting-stat">
                    <div class="waiting-stat-value" id="searchingCount">12</div>
                    <div class="waiting-stat-label">Ищут собеседника</div>
                </div>
            </div>
            
            <button class="cancel-button" onclick="cancelSearch()">Отменить поиск</button>
        </div>
    </div>

    <!-- Вкладка Чат -->
    <div class="tab-container" id="chatTab">
        <div class="chat-header">
            <button class="back-button" onclick="leaveChat()">‹</button>
            <div class="chat-info">
                <div class="chat-title" id="chatRoomTitle">Чат</div>
                <div class="chat-members">
                    <span id="onlineCount">1 участник</span>
                    <span id="typingIndicator" style="display: none;"> - печатает...</span>
                </div>
            </div>
            
            <!-- Шестеренка настроек чата -->
            <div class="chat-settings">
                <button class="settings-button" onclick="toggleChatSettings()">⚙️</button>
                <div class="settings-dropdown" id="chatSettingsDropdown">
                    <div class="settings-item" onclick="openThemeSettings()">
                        <span>🎨</span> Оформление
                    </div>
                    <div class="settings-item" onclick="clearChatHistory()">
                        <span>🗑️</span> Очистить историю
                    </div>
                    <div class="settings-item" onclick="reportChat()">
                        <span>⚠️</span> Пожаловаться
                    </div>
                </div>
            </div>
            
            <!-- Кнопка пола собеседника -->
            <div class="chat-actions">
                <button class="action-button" onclick="showPartnerGender()">
                    <span>👤</span>Пол собеседника
                </button>
            </div>
        </div>

        <!-- Кнопки управления как на фото -->
        <div class="chat-controls">
            <button class="control-button add-friend" onclick="sendFriendRequest()">
                <span>👤</span>Добавить в друзья
            </button>
            <button class="control-button like" onclick="sendLike()">
                <span>❤️</span>Нравится собеседник
            </button>
            <button class="control-button dislike" onclick="sendDislike()">
                <span>👎</span>Не нравится
            </button>
        </div>

        <div class="messages-container" id="messagesContainer">
            <!-- Сообщения загружаются динамически -->
        </div>

        <div class="message-input-container">
            <input type="text" id="messageInput" placeholder="Введите сообщение..." maxlength="500" onkeypress="handleKeyPress(event)">
            <button class="send-button" onclick="sendMessage()">
                <span style="font-size: 18px;">➤</span>
            </button>
        </div>
    </div>

    <!-- Модальные окна (общие для всех вкладок) -->
    <div class="modal-overlay" id="createChatModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle">Создать чат для Общения</div>
                <button class="close-button" onclick="closeCreateChatModal()">×</button>
            </div>
            
            <div class="form-group">
                <label class="form-label">Ваш пол</label>
                <div class="options-grid" id="myGenderOptions">
                    <div class="option-button active" onclick="toggleOption(this)">Мужской</div>
                    <div class="option-button" onclick="toggleOption(this)">Женский</div>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Ваш возраст</label>
                <input type="number" class="age-input" id="myAge" placeholder="25" min="18" max="80" value="25">
            </div>
            
            <div class="form-group">
                <label class="form-label">Пол собеседника</label>
                <div class="options-grid" id="partnerGenderOptions">
                    <div class="option-button" onclick="toggleOption(this)">Мужской</div>
                    <div class="option-button" onclick="toggleOption(this)">Женский</div>
                    <div class="option-button active" onclick="toggleOption(this)">Любой</div>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Возраст собеседника</label>
                <div class="slider-container">
                    <div class="slider-group">
                        <div class="slider-label">
                            <span>Диапазон: <span id="minAgeValue">18</span> - <span id="maxAgeValue">35</span> лет</span>
                        </div>
                        <div class="slider-wrapper">
                            <input type="range" min="18" max="80" value="18" class="slider" id="minAgeSlider" oninput="updateAgeRange()">
                            <input type="range" min="18" max="80" value="35" class="slider" id="maxAgeSlider" oninput="updateAgeRange()">
                        </div>
                    </div>
                </div>
                <input type="hidden" id="minAge" value="18">
                <input type="hidden" id="maxAge" value="35">
            </div>
            
            <button class="create-button" onclick="createChat()">Создать чат</button>
        </div>
    </div>

    <!-- Модальное окно настроек оформления -->
    <div class="modal-overlay" id="themeSettingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Оформление</div>
                <button class="close-button" onclick="closeThemeSettings()">×</button>
            </div>
            
            <div class="theme-options">
                <div class="theme-option active" onclick="setTheme('light')">
                    <div class="theme-preview theme-light"></div>
                    <div>
                        <div class="setting-title">Светлая</div>
                        <div class="setting-description">Классическая светлая тема</div>
                    </div>
                </div>
                <div class="theme-option" onclick="setTheme('dark')">
                    <div class="theme-preview theme-dark"></div>
                    <div>
                        <div class="setting-title">Темная</div>
                        <div class="setting-description">Комфортная для глаз</div>
                    </div>
                </div>
                <div class="theme-option" onclick="setTheme('blue')">
                    <div class="theme-preview theme-blue"></div>
                    <div>
                        <div class="setting-title">Синяя</div>
                        <div class="setting-description">Свежая синяя тема</div>
                    </div>
                </div>
                <div class="theme-option" onclick="setTheme('green')">
                    <div class="theme-preview theme-green"></div>
                    <div>
                        <div class="setting-title">Зеленая</div>
                        <div class="setting-description">Спокойная зеленая тема</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно настроек чата -->
    <div class="modal-overlay" id="chatSettingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Настройки чата</div>
                <button class="close-button" onclick="closeChatSettings()">×</button>
            </div>
            
            <div class="chat-settings-options">
                <div class="setting-card">
                    <div class="setting-card-title">Размер текста</div>
                    <div class="slider-group">
                        <div class="slider-label">
                            <span>Размер шрифта</span>
                            <span class="slider-value" id="fontSizeValue">16px</span>
                        </div>
                        <input type="range" min="12" max="20" value="16" class="slider" id="fontSizeSlider" oninput="updateFontSize(this.value)">
                    </div>
                </div>
                
                <div class="setting-card">
                    <div class="setting-card-title">Скругление сообщений</div>
                    <div class="slider-group">
                        <div class="slider-label">
                            <span>Радиус скругления</span>
                            <span class="slider-value" id="bubbleRadiusValue">18px</span>
                        </div>
                        <input type="range" min="8" max="25" value="18" class="slider" id="bubbleRadiusSlider" oninput="updateBubbleRadius(this.value)">
                    </div>
                </div>
                
                <div class="setting-card">
                    <div class="setting-card-title">Предпросмотр</div>
                    <div class="message-preview">
                        <div class="preview-message their">Привет! Как дела?</div>
                        <div class="preview-message my">Отлично! А у тебя?</div>
                    </div>
                </div>
                
                <button class="create-button" onclick="resetChatSettings()">Сбросить настройки</button>
            </div>
        </div>
    </div>

    <!-- Нижнее меню -->
    <div class="bottom-menu">
        <div class="menu-item active" onclick="showTab('chatsTab')">
            <div class="menu-icon">💬</div>
            <div class="menu-text">Чаты</div>
        </div>
        <div class="menu-item" onclick="showTab('profileTab')">
            <div class="menu-icon">👤</div>
            <div class="menu-text">Профиль</div>
        </div>
        <div class="menu-item" onclick="showTab('settingsTab')">
            <div class="menu-icon">⚙️</div>
            <div class="menu-text">Настройки</div>
        </div>
    </div>

    <script>
        // Глобальные переменные
        let allChats = [];
        let userStats = {
            createdChats: 0,
            sentMessages: 0,
            friends: 0,
            daysActive: 1,
            reputation: 150
        };
        let currentChat = null;
        let currentTheme = 'Общение';
        let waitingTimer = null;
        let searchTimer = null;
        let waitingTime = 0;

        // Управление вкладками
        function showTab(tabId) {
            // Скрываем все вкладки
            document.querySelectorAll('.tab-container').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Показываем выбранную вкладку
            document.getElementById(tabId).classList.add('active');
            
            // Обновляем активное меню (кроме чата и ожидания)
            if (tabId !== 'chatTab' && tabId !== 'waitingTab') {
                document.querySelectorAll('.menu-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                if (tabId === 'chatsTab') {
                    document.querySelector('.menu-item:nth-child(1)').classList.add('active');
                } else if (tabId === 'profileTab') {
                    document.querySelector('.menu-item:nth-child(2)').classList.add('active');
                } else if (tabId === 'settingsTab') {
                    document.querySelector('.menu-item:nth-child(3)').classList.add('active');
                }
            }
        }

        // Управление темами
        function loadThemeSettings() {
            const savedTheme = localStorage.getItem('app_theme') || 'light';
            setTheme(savedTheme);
        }

        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('app_theme', theme);
            
            // Обновляем активную опцию в настройках
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
            });
            
            const themeElement = document.querySelector(`.theme-option:nth-child(${
                theme === 'light' ? 1 : 
                theme === 'dark' ? 2 : 
                theme === 'blue' ? 3 : 4
            })`);
            if (themeElement) {
                themeElement.classList.add('active');
            }
            
            closeThemeSettings();
        }

        // Настройки чата
        function loadChatSettings() {
            const fontSize = localStorage.getItem('chat_font_size') || '16';
            const bubbleRadius = localStorage.getItem('chat_bubble_radius') || '18';
            
            updateFontSize(fontSize, false);
            updateBubbleRadius(bubbleRadius, false);
        }

        function updateFontSize(size, save = true) {
            document.documentElement.style.setProperty('--font-size', size + 'px');
            document.getElementById('fontSizeValue').textContent = size + 'px';
            document.getElementById('fontSizeSlider').value = size;
            
            if (save) {
                localStorage.setItem('chat_font_size', size);
            }
        }

        function updateBubbleRadius(radius, save = true) {
            document.documentElement.style.setProperty('--bubble-radius', radius + 'px');
            document.getElementById('bubbleRadiusValue').textContent = radius + 'px';
            document.getElementById('bubbleRadiusSlider').value = radius;
            
            if (save) {
                localStorage.setItem('chat_bubble_radius', radius);
            }
        }

        function resetChatSettings() {
            updateFontSize('16');
            updateBubbleRadius('18');
            showNotification('Настройки сброшены');
        }

        // Модальные окна
        function openThemeSettings() {
            document.getElementById('themeSettingsModal').style.display = 'flex';
        }

        function closeThemeSettings() {
            document.getElementById('themeSettingsModal').style.display = 'none';
        }

        function openChatSettings() {
            document.getElementById('chatSettingsModal').style.display = 'flex';
        }

        function closeChatSettings() {
            document.getElementById('chatSettingsModal').style.display = 'none';
        }

        // Шестеренка настроек чата
        function toggleChatSettings() {
            const dropdown = document.getElementById('chatSettingsDropdown');
            dropdown.classList.toggle('active');
            
            setTimeout(() => {
                document.addEventListener('click', closeChatSettingsDropdown);
            }, 100);
        }

        function closeChatSettingsDropdown(event) {
            const dropdown = document.getElementById('chatSettingsDropdown');
            if (!event.target.closest('.chat-settings')) {
                dropdown.classList.remove('active');
                document.removeEventListener('click', closeChatSettingsDropdown);
            }
        }

        function clearChatHistory() {
            if (confirm('Очистить историю чата?')) {
                const container = document.getElementById('messagesContainer');
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--text-secondary);">
                        <div style="font-size: 48px; margin-bottom: 16px;">💭</div>
                        <div>История чата очищена</div>
                    </div>
                `;
                showNotification('История чата очищена');
                document.getElementById('chatSettingsDropdown').classList.remove('active');
            }
        }

        function reportChat() {
            showNotification('Жалоба отправлена модераторам');
            document.getElementById('chatSettingsDropdown').classList.remove('active');
        }

        // Вкладки чатов
        function switchChatTab(theme) {
            currentTheme = theme;
            document.querySelectorAll('.chat-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById('createChatText').textContent = 'Создать чат для ' + theme;
            document.getElementById('modalTitle').textContent = 'Создать чат для ' + theme;
            renderChatsList();
        }

        // Создание чата
        function openCreateChatModal() {
            document.getElementById('createChatModal').style.display = 'flex';
        }

        function closeCreateChatModal() {
            document.getElementById('createChatModal').style.display = 'none';
        }

        function toggleOption(element) {
            const parent = element.parentElement;
            parent.querySelectorAll('.option-button').forEach(btn => {
                btn.classList.remove('active');
            });
            element.classList.add('active');
        }

        function updateAgeRange() {
            const minSlider = document.getElementById('minAgeSlider');
            const maxSlider = document.getElementById('maxAgeSlider');
            const minAgeValue = document.getElementById('minAgeValue');
            const maxAgeValue = document.getElementById('maxAgeValue');
            const minAge = document.getElementById('minAge');
            const maxAge = document.getElementById('maxAge');
            
            let minVal = parseInt(minSlider.value);
            let maxVal = parseInt(maxSlider.value);
            
            if (minVal > maxVal) {
                minVal = maxVal;
                minSlider.value = minVal;
            }
            
            minAgeValue.textContent = minVal;
            maxAgeValue.textContent = maxVal;
            minAge.value = minVal;
            maxAge.value = maxVal;
        }

        function createChat() {
            const myGender = document.querySelector('#myGenderOptions .option-button.active').textContent;
            const myAge = document.getElementById('myAge').value || 25;
            const partnerGender = document.querySelector('#partnerGenderOptions .option-button.active').textContent;
            const minAge = document.getElementById('minAge').value;
            const maxAge = document.getElementById('maxAge').value;
            
            if (!myAge || myAge < 18 || myAge > 80) {
                showNotification('Пожалуйста, введите корректный возраст (18-80)');
                return;
            }
            
            const newChat = {
                id: 'chat_' + Date.now(),
                theme: currentTheme,
                myGender,
                myAge: parseInt(myAge),
                partnerGender,
                minAge: parseInt(minAge),
                maxAge: parseInt(maxAge),
                createdAt: new Date(),
                participants: 1,
                messages: [],
                status: 'waiting', // waiting, active, closed
                creator: true
            };
            
            allChats.unshift(newChat);
            userStats.createdChats++;
            updateProfileStats();
            
            closeCreateChatModal();
            renderChatsList();
            
            // Переходим на экран ожидания
            startWaitingScreen(newChat);
        }

        // Экран ожидания
        function startWaitingScreen(chat) {
            currentChat = chat;
            waitingTime = 0;
            
            // Обновляем статистику поиска
            updateSearchStats();
            
            // Запускаем таймеры
            waitingTimer = setInterval(updateWaitingTime, 1000);
            searchTimer = setInterval(updateSearchStats, 3000);
            
            // Показываем экран ожидания
            showTab('waitingTab');
            
            // Симуляция нахождения собеседника через 5-15 секунд
            setTimeout(findPartner, 5000 + Math.random() * 10000);
        }

        function updateWaitingTime() {
            waitingTime++;
            const minutes = Math.floor(waitingTime / 60);
            const seconds = waitingTime % 60;
            document.getElementById('waitingTime').textContent = 
                `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        function updateSearchStats() {
            // Случайное количество ищущих собеседника
            const searchingCount = Math.floor(Math.random() * 10) + 8;
            document.getElementById('searchingCount').textContent = searchingCount;
        }

        function cancelSearch() {
            clearInterval(waitingTimer);
            clearInterval(searchTimer);
            
            if (currentChat) {
                currentChat.status = 'closed';
            }
            
            showNotification('Поиск собеседника отменен');
            showTab('chatsTab');
        }

        function findPartner() {
            clearInterval(waitingTimer);
            clearInterval(searchTimer);
            
            if (currentChat) {
                currentChat.status = 'active';
                currentChat.participants = 2;
                currentChat.partnerJoined = true;
                
                showNotification('Собеседник найден!');
                joinChat(currentChat);
            }
        }

        // Рендеринг списка чатов
        function renderChatsList() {
            const container = document.getElementById('chatsContainer');
            const filteredChats = allChats.filter(chat => chat.theme === currentTheme);
            
            if (filteredChats.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--text-secondary);">
                        <div style="font-size: 48px; margin-bottom: 16px;">💬</div>
                        <div>Пока нет активных чатов</div>
                        <div style="font-size: 14px; margin-top: 8px;">Создайте первый чат для ${currentTheme}</div>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = filteredChats.map(chat => `
                <div class="user-card" onclick="joinChat('${chat.id}')">
                    <div class="user-info">
                        <div class="info-row">
                            <span class="info-label">Тема:</span>
                            <span class="info-value">${chat.theme}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Участников:</span>
                            <span class="info-value">${chat.participants}/2</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Статус:</span>
                            <span class="info-value">${getChatStatus(chat)}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Возраст:</span>
                            <span class="info-value">${chat.myAge}</span>
                        </div>
                    </div>
                    <div class="theme-tag">${getChatStatusBadge(chat)}</div>
                </div>
            `).join('');
        }

        function getChatStatus(chat) {
            if (chat.status === 'waiting') return 'Ожидание';
            if (chat.status === 'active') return 'Активен';
            return 'Завершен';
        }

        function getChatStatusBadge(chat) {
            if (chat.status === 'waiting') return '⏳ Ожидание';
            if (chat.status === 'active') return '💬 Активен';
            return '❌ Завершен';
        }

        // Вход в чат
        function joinChat(chatId) {
            const chat = typeof chatId === 'string' ? allChats.find(c => c.id === chatId) : chatId;
            if (!chat) return;
            
            currentChat = chat;
            
            if (chat.status === 'waiting') {
                // Если чат в ожидании, показываем экран ожидания
                startWaitingScreen(chat);
                return;
            }
            
            document.getElementById('chatRoomTitle').textContent = `Чат для ${chat.theme}`;
            document.getElementById('onlineCount').textContent = `${chat.participants} участников`;
            
            // Рендерим сообщения
            const container = document.getElementById('messagesContainer');
            if (chat.messages.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--text-secondary);">
                        <div style="font-size: 48px; margin-bottom: 16px;">💭</div>
                        <div>Чат создан! Начните общение</div>
                    </div>
                `;
            } else {
                container.innerHTML = chat.messages.map(msg => `
                    <div class="message ${msg.isMy ? 'message-my' : 'message-their'}">
                        ${!msg.isMy ? `<div class="message-sender">Собеседник</div>` : ''}
                        <div>${msg.text}</div>
                        <div class="message-time">${msg.time}</div>
                    </div>
                `).join('');
                container.scrollTop = container.scrollHeight;
            }
            
            showTab('chatTab');
        }

        // Отправка сообщений
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const text = input.value.trim();
            
            if (!text || !currentChat) return;
            
            if (text.length > 500) {
                showNotification('Сообщение слишком длинное (максимум 500 символов)');
                return;
            }
            
            const message = {
                id: 'msg_' + Date.now(),
                text: text,
                time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}),
                isMy: true
            };
            
            currentChat.messages.push(message);
            userStats.sentMessages++;
            updateProfileStats();
            
            // Рендерим сообщение
            const container = document.getElementById('messagesContainer');
            if (container.querySelector('.message') === null) {
                container.innerHTML = '';
            }
            
            const messageElement = document.createElement('div');
            messageElement.className = 'message message-my';
            messageElement.innerHTML = `
                <div>${message.text}</div>
                <div class="message-time">${message.time}</div>
            `;
            
            container.appendChild(messageElement);
            container.scrollTop = container.scrollHeight;
            
            input.value = '';
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Управление чатом
        function leaveChat() {
            if (currentChat && currentChat.status === 'waiting') {
                cancelSearch();
            } else {
                showTab('chatsTab');
            }
        }

        function sendFriendRequest() {
            showNotification('Запрос дружбы отправлен');
        }

        function sendLike() {
            showNotification('❤️ Вы выразили симпатию собеседнику');
        }

        function sendDislike() {
            if (confirm('Покинуть этот чат?')) {
                if (currentChat) {
                    currentChat.status = 'closed';
                }
                showNotification('Чат завершен');
                showTab('chatsTab');
            }
        }

        function showPartnerGender() {
            if (!currentChat) return;
            
            const genders = ['Мужской', 'Женский'];
            const gender = currentChat.partnerGender === 'Любой' 
                ? genders[Math.floor(Math.random() * genders.length)]
                : currentChat.partnerGender;
                
            showNotification(`Пол собеседника: ${gender}`);
        }

        // Уведомления
        function showNotification(message) {
            const snackbar = document.createElement('div');
            snackbar.className = 'snackbar';
            snackbar.textContent = message;
            document.body.appendChild(snackbar);
            
            setTimeout(() => {
                snackbar.remove();
            }, 3000);
        }

        function enableNotifications() {
            if ('Notification' in window) {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        showNotification('Уведомления включены');
                    }
                });
            } else {
                showNotification('Браузер не поддерживает уведомления');
            }
        }

        // Профиль и настройки
        function loadUserStats() {
            const savedStats = localStorage.getItem('userStats');
            if (savedStats) {
                userStats = JSON.parse(savedStats);
            }
        }

        function updateProfileStats() {
            document.getElementById('chatsCount').textContent = userStats.createdChats;
            document.getElementById('messagesCount').textContent = userStats.sentMessages;
            document.getElementById('friendsCount').textContent = userStats.friends;
            document.getElementById('daysCount').textContent = userStats.daysActive;
            document.getElementById('profileReputation').textContent = userStats.reputation;
            
            localStorage.setItem('userStats', JSON.stringify(userStats));
        }

        // Функции для кнопок профиля и настроек
        function shareApp() {
            showNotification('Ссылка на приложение скопирована');
        }

        function openMyChats() {
            showTab('chatsTab');
        }

        function inviteFriends() {
            showNotification('Приглашение друзьям отправлено');
        }

        function openNotificationsSettings() {
            showNotification('Настройки уведомлений открыты');
        }

        function openPrivacySettings() {
            showNotification('Настройки конфиденциальности открыты');
        }

        function addToFavorites() {
            showNotification('Приложение добавлено в избранное');
        }

        function openAppInfo() {
            showNotification('Версия 1.0.0\nРазработчик: Анонимный Чат');
        }

        function support() {
            showNotification('Связь с поддержкой: support@anonymouschat.ru');
        }

        // Инициализация приложения
        function initApp() {
            loadThemeSettings();
            loadChatSettings();
            loadUserStats();
            updateProfileStats();
            setupEventListeners();
            renderChatsList();
        }

        function setupEventListeners() {
            updateAgeRange();
        }

        // Запуск приложения
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
